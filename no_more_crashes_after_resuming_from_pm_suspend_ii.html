<!DOCTYPE html>
<!-- this document is auto-generated from pankat document editor -->
<html xmlns="http://www.w3.org/1999/xhtml">

<head data-article-dst-filename="no_more_crashes_after_resuming_from_pm_suspend_ii.html">

<meta charset="utf-8" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>no more crashes after resuming from pm suspend ii</title>

<script src="js/jquery.min.js"></script>

<script src="js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="js/jquery.tocify.min.js"></script>

<link type="text/css" rel="stylesheet" href="css/jquery.tocify.css" />



<script src="js/reconnecting-websocket.min.js"></script>
<script src="js/pankat-websocket.js"></script>
<script src="js/diffDOM.js"></script>


<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
<script src="js/bootstrap.min.js"></script>

<script src="js/anchor.min.js"></script>

<link rel="icon" href="media/favicon.ico" type="image/x-icon" />


<!--[if lt IE 9]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="css/pandoc-kate.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />

</head>
<body>

<div id="toc"></div>

<!-- menu begins -->
<div class="container">
  <nav class="navbar navbar-default">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">lastlog.de/blog</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="timeline.html"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> timeline</a></li>
        <li><a href="about.html"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> about</a></li>
        <li><a href="/draft" id="draft" style="display: none"><span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> draft</a></li>
        <li><a href="/draft?article=posts/roadmap.mdwn" id="roadmap" style="display: none"><span class="glyphicon glyphicon glyphicon-road" aria-hidden="true"></span> roadmap</a></li>

      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li><a title="live updates of article updates on posts/suspend/no_more_crashes_after_resuming_from_pm_suspend_ii.mdwn" id="websocket" style="display: none"><span id="websocketStatus" class="glyphicon glyphicon-remove" aria-hidden="true"></span> websocket</a></li>
        <!-- <li><a href="#">Login</a></li> -->
      </ul>

      <!--<div id="right">
        <form class="navbar-form navbar-right">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
        </form>
      </div>-->
    </div><!-- /.navbar-collapse -->
  </nav>

<div id="headerAndArticle">


  <div id="headerContainer">
    <header class="header"><span id="articleNavLeft"> <a href="creating_c++_classes_using_python_scripts.html"> 
      <span class="glyphiconLink glyphicon glyphicon-chevron-left" aria-hidden="true" title="previous article"> </span> prev. article
    </a> </span><span id="articleNavRight"><a href="gentoo_user_only_2gb_ram_or_less.html"> 
        next article <span class="glyphiconLink glyphicon glyphicon-chevron-right" aria-hidden="true" title="next article"></span>
    </a> </span></header>
  </div>
  

  <div class="article">
    <h1 id="SiteTitle">no more crashes after resuming from pm suspend ii</h1>
    <div id="date"><p><span id="lastupdated">19 sep 2010</span></p></div><div id="tags"><p><a href="timeline.html?filter=tag::gentoo" class="tagbtn btn btn-primary">gentoo</a></p></div>
    <p><a href="media/hp-com-elitebook-8530w.jpg"><img src=media/hp-com-elitebook-8530w.jpg size=180x caption="hp elite book 8530w, source hp.com" style="float: right"></a></p>
<h2 data-number="1" id="the-problem">the problem</h2>
<p>since my last posting the ‘hp elitebook 8530w’ kept crashing quite
often, when doing a resume after pm-suspend. i think i found a cure.
disabling ‘compositing’ using:</p>
<ul>
<li>kde - system settings - desktop - ‘enabled desktop effects’</li>
</ul>
<p>made it work. but for some unknown reason there were these random
crashes when resuming.</p>
<h2 data-number="2" id="the-fix">the fix</h2>
<p>it is NOT enough to disable this in kde as for some reason, it
sometimes got reenabled without my influence (i don’t have any clue
why). so today i tried to find a way to make these crashes reproducable:
with some good results.</p>
<p>the problem was definitely related to ‘compositing’ (or AIGLX?) so i
remembered the times when the ‘compositing’ extension was disabled by
default, maybe for good reason?</p>
<p>i disabled it by editing xorg.conf:</p>
<pre><code>Section &quot;Extensions&quot;
Option  &quot;Composite&quot; &quot;Disable&quot;
EndSection
Section &quot;ServerFlags&quot;
Option  &quot;AIGLX&quot; &quot;off&quot;
EndSection</code></pre>
<p>after a restart of xdm with this new settings i could not get it to
crash as i did before. that is good news to me! maybe it’s time to test
<strong>x11-drivers/nvidia-drivers-256.35</strong> again!</p>
<p>right now i’m using =x11-drivers/nvidia-drivers-195.36.24 with
2.6.34-gentoo-r1 with this graphics card:</p>
<pre><code>01:00.0 VGA compatible controller: nVidia Corporation G96M [Quadro FX 770M] (rev a1)</code></pre>
<p>i also have 2d and 3d acceleration running. <em>yepee</em></p>
<h2 data-number="3" id="update">update</h2>
<p><strong>21.09.2010</strong> this is so strange, i still receive
regular crashes on ‘resume’ but maybe they are not directly related to
the nvidia module. the problem is that this is very hard to debug as
there is no graphical output nor any log files to start with …</p>

  </div>

</div>

<div id="ArticleSourceCode">

<a href="posts/suspend/no_more_crashes_after_resuming_from_pm_suspend_ii.mdwn" title="posts\suspend\no_more_crashes_after_resuming_from_pm_suspend_ii.mdwn">article source</a>
</div>

</div>

<div id="scrollUp">
<span id="scrollUpBtn" class="glyphiconLink glyphicon glyphicon-chevron-up" aria-hidden="true" title="scroll up"></span>
</div>

<script>
$("#scrollUpBtn").click(function() {
  $("html, body").animate({ scrollTop: 0 }, "slow");
  return false;
});
</script>


<script>
window.onload = function(e){
  anchors.add('h1')
  anchors.add('h2')
  anchors.add('h3')
  anchors.add('h4')
  anchors.add('h5')
}
</script>




<script>
$(document).ready(function() {
  //Calls the tocify method on your HTML div.
  $("#toc").tocify();
});
$("#toc").hover(function() {
  $("#toc").css("z-index", "111")
}, function() {
  $("#toc").css("z-index", "1")
});
</script>



<script>

var shifted = false;

$(window).keyup(function(event) {
    shifted = event.shiftKey;
});

$(window).keydown(function(event) {
  if(event.keyCode == 16){
    shifted = event.shiftKey;
  }
  if (shifted == false) {
      if(event.keyCode == 37){
        $('.glyphicon-chevron-left')[0].click()
      }
      if(event.keyCode == 39){
        $('.glyphicon-chevron-right')[0].click()
      }
  }
});
</script>


<script>
// check if we got served from pankat-server
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
if (xhr.readyState == XMLHttpRequest.DONE) {
  if (xhr.status == 200) {
    console.log("request to /pankat-server returned status: " + xhr.status + ", so yes we got served from pankat-server");
    $('#draft').css("display", "block");
    $('#roadmap').css("display", "block");
  }
}
}
xhr.open('GET', "/pankat-server", false);
xhr.send(null);
</script>
</body>
</html>
