<!DOCTYPE html>
<!-- this document is auto-generated from pankat document editor -->
<html xmlns="http://www.w3.org/1999/xhtml">

<head data-article-dst-filename="shinken_0.6_on_gentoo.html">

<meta charset="utf-8" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>shinken 0.6 on gentoo</title>

<script src="js/jquery.min.js"></script>

<script src="js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="js/jquery.tocify.min.js"></script>

<link type="text/css" rel="stylesheet" href="css/jquery.tocify.css" />



<script src="js/reconnecting-websocket.min.js"></script>
<script src="js/pankat-websocket.js"></script>
<script src="js/diffDOM.js"></script>


<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
<script src="js/bootstrap.min.js"></script>

<script src="js/anchor.min.js"></script>

<link rel="icon" href="media/favicon.ico" type="image/x-icon" />


<!--[if lt IE 9]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="css/pandoc-kate.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />

</head>
<body>

<div id="toc"></div>

<!-- menu begins -->
<div class="container">
  <nav class="navbar navbar-default">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">lastlog.de/blog</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="timeline.html"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> timeline</a></li>
        <li><a href="about.html"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> about</a></li>
        <li><a href="/draft" id="draft" style="display: none"><span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> draft</a></li>
        <li><a href="/draft?article=posts/roadmap.mdwn" id="roadmap" style="display: none"><span class="glyphicon glyphicon glyphicon-road" aria-hidden="true"></span> roadmap</a></li>

      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li><a title="live updates of article updates on posts/shinken/shinken_0.6_on_gentoo.mdwn" id="websocket" style="display: none"><span id="websocketStatus" class="glyphicon glyphicon-remove" aria-hidden="true"></span> websocket</a></li>
        <!-- <li><a href="#">Login</a></li> -->
      </ul>

      <!--<div id="right">
        <form class="navbar-form navbar-right">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
        </form>
      </div>-->
    </div><!-- /.navbar-collapse -->
  </nav>

<div id="headerAndArticle">


  <div id="headerContainer">
    <header class="header"><span id="articleNavLeft"> <a href="nixos_on_a_hetzner_root_server.html"> 
      <span class="glyphiconLink glyphicon glyphicon-chevron-left" aria-hidden="true" title="previous article"> </span> prev. article
    </a> </span><span id="articleNavRight"><a href="converting_a_virtualbox_image_to_a_libvirt.html"> 
        next article <span class="glyphiconLink glyphicon glyphicon-chevron-right" aria-hidden="true" title="next article"></span>
    </a> </span></header>
  </div>
  
      <div id="seriesContainer">
      <a href="timeline.html?filter=series::shinken" title="article series shinken" class="seriesbtn btn btn-primary">shinken</a>
        <header class="seriesHeader">
          <div id="seriesLeft">  </div>
          <div id="seriesRight">   <a href="shinken_1.2.4_on_ubuntu_desktop_12.10.html">
              <span class="glyphiconLinkSeries glyphicon glyphicon-chevron-right" aria-hidden="true" title="next article in series"></span>
            </a></div>
        </header>
      </div>

  <div class="article">
    <h1 id="SiteTitle">shinken 0.6 on gentoo</h1>
    <div id="date"><p><span id="lastupdated">18 may 2011</span></p></div><div id="tags"><p><a href="timeline.html?filter=tag::gentoo" class="tagbtn btn btn-primary">gentoo</a><a href="timeline.html?filter=tag::shinken" class="tagbtn btn btn-primary">shinken</a></p></div>
    <p><a href="media/shinken.png"><img src=media/shinken.png alt="copied from shinken-monitoring.org" style="float: right"></a></p>
<p><a href="media/200px-gentoo_linux_logo_matte-svg.png"><img src=media/200px-gentoo_linux_logo_matte-svg.png alt="gentoo linux logo (copied from commons.wikipedia.org)" style="float: right"></a></p>
<h2 data-number="1" id="motivation">motivation</h2>
<p>recently i had problems with the deployment of an** experimental**
‘<strong>shinken</strong>’ [1], a monitoring tool, on gentoo. most of
the installation was ‘straightforward’. but i had a problem with
livestatus in combination to ‘<strong>thruk</strong>’ [2].</p>
<p><strong>Note:</strong> i basically used the <strong>shinken guide
[3]</strong> for fast and easy testing of shinken</p>
<ul>
<li>gentoo linux in virtualbox</li>
<li>shinken 0.6</li>
<li>thruk-1.0.3 (using the perl webserver; NOT using apache2)</li>
</ul>
<h2 data-number="2" id="dependencies">dependencies</h2>
<p>this list contains packages which are not essentially (as the apache
and mysql stuff) but it’s basically all packages i’ve installed to make
it work, so just pick what you need:</p>
<pre><code>&gt; sys-apps/portage-2.1.9.25
app-emulation/emul-linux-x86-baselibs-20100915-r1
sys-kernel/gentoo-sources-2.6.36-r5
sys-kernel/genkernel-3.4.10.907
app-arch/xz-utils-4.999.9_beta
sys-kernel/gentoo-sources-2.6.36-r5
sys-boot/grub-0.97-r10
sys-kernel/genkernel-3.4.10.907
app-portage/eix-0.20.5
net-misc/dhcpcd-5.2.8
app-admin/eselect-vi-1.1.7-r1
sys-libs/gpm-1.20.6
app-admin/eselect-ctags-1.13
app-portage/eix-0.20.5
sys-apps/iproute2-2.6.35-r2
dev-util/ctags-5.7
app-editors/vim-core-7.3.50
app-editors/vim-7.3.50
app-vim/gentoo-syntax-20100215
dev-python/setuptools-0.6.15
dev-python/pyro-3.12
dev-python/pyro-4.3
app-admin/metalog-1
virtual/logger-0
net-libs/libpcap-1.1.1
net-analyzer/nmap-5.21-r1
app-editors/gentoo-editor-2
virtual/pam-0
net-mail/mailbase-1
mail-mta/ssmtp-2.62-r8
virtual/mta-0
app-admin/sudo-1.7.4_p5
dev-libs/oniguruma-5.9.2
dev-db/mysql-init-scripts-1.2
dev-libs/apr-1.4.4
app-admin/eselect-php-0.6.2
dev-libs/libmcrypt-2.5.8-r2
dev-util/pkgconfig-0.25-r2
sys-apps/ed-1.4
dev-perl/Net-Daemon-0.43
perl-core/Storable-2.20
perl-core/File-Spec-3.31
virtual/perl-Sys-Syslog-0.27
dev-libs/libpcre-8.12
dev-libs/apr-util-1.3.11
virtual/perl-Storable-2.20
virtual/perl-File-Spec-3.31
app-admin/apache-tools-2.2.17
dev-perl/PlRPC-0.202.0
www-servers/apache-2.2.17
dev-perl/DBI-1.615
dev-db/mysql-5.0.91
virtual/mysql-5.0
dev-perl/DBD-mysql-4.01.7
dev-lang/php-5.3.6
media-libs/gd-2.0.35-r1
dev-perl/GD-2.44
dev-perl/yaml-0.71
app-misc/screen-4.0.3-r4
dev-perl/JSON-2.27
perl-core/Compress-Raw-Zlib-2.024
app-arch/unzip-6.0-r1
app-vim/genutils-2.5
virtual/perl-MIME-Base64-3.08
dev-perl/URI-1.55
app-misc/beep-1.2.2-r1
dev-libs/eventlog-0.2.12
app-text/build-docbook-catalog-1.4
app-text/sgml-common-0.6.3-r5
dev-libs/libgpg-error-1.10
app-text/docbook-xsl-stylesheets-1.75.2
dev-libs/libgcrypt-1.4.6
dev-libs/libxslt-1.1.26-r1
app-text/docbook-xml-dtd-4.3-r1
dev-util/gtk-doc-am-1.16
dev-libs/glib-2.28.6
app-admin/syslog-ng-3.1.4
net-analyzer/nagios-plugins-1.4.14-r2
app-misc/realpath-1.15-r1
app-portage/gentoolkit-0.2.4.6.1-r1
dev-python/simplejson-2.1.3
dev-db/sqlite-3.7.5
dev-python/pysqlite-2.6.3</code></pre>
<h2 data-number="3" id="problem-with-livestatus">problem with
livestatus</h2>
<p>i’ve missed a line in the README of shinken and therefore the
livestatus service on port 50000 was not enabled. but there was no
‘good’ error message mentioning what actually got wrong.</p>
<p>thruk reported (in the webinterface):</p>
<blockquote>
<p>No Backend available</p>
</blockquote>
<p>shinken reported (/var/lib/shinken/brokerd.log):</p>
<blockquote>
<p>[broker-1] Warning : the module type livestatus for Livestatus was
not found in modules!</p>
</blockquote>
<p>But that was fixed after i installed:</p>
<ul>
<li>dev-db/sqlite-3.7.5</li>
<li>dev-python/pysqlite-2.6.3</li>
</ul>
<p>and restarted shinken.</p>
<h3 data-number="3.1" id="debugging">debugging</h3>
<p>look into:</p>
<ul>
<li>/etc/shinken/ (config files)</li>
<li>/var/lib/shinken (log files)</li>
</ul>
<p>optinally one can restart a single module of the shinken service with
debugging:</p>
<blockquote>
<p>/etc/init.d/shinken-broker -d restart</p>
</blockquote>
<h3 data-number="3.2" id="solution">solution</h3>
<h2 data-number="4" id="links">links</h2>
<ul>
<li>[1] <a href="http://www.shinken-monitoring.org/"
class="uri">http://www.shinken-monitoring.org/</a></li>
<li>[2] <a href="http://www.thruk.org/"
class="uri">http://www.thruk.org/</a></li>
<li>[3] <a
href="http://www.shinken-monitoring.org/wiki/shinken_10min_start"
class="uri">http://www.shinken-monitoring.org/wiki/shinken_10min_start</a></li>
</ul>

  </div>

</div>

<div id="ArticleSourceCode">

<a href="posts/shinken/shinken_0.6_on_gentoo.mdwn" title="posts\shinken\shinken_0.6_on_gentoo.mdwn">article source</a>
</div>

</div>

<div id="scrollUp">
<span id="scrollUpBtn" class="glyphiconLink glyphicon glyphicon-chevron-up" aria-hidden="true" title="scroll up"></span>
</div>

<script>
$("#scrollUpBtn").click(function() {
  $("html, body").animate({ scrollTop: 0 }, "slow");
  return false;
});
</script>


<script>
window.onload = function(e){
  anchors.add('h1')
  anchors.add('h2')
  anchors.add('h3')
  anchors.add('h4')
  anchors.add('h5')
}
</script>




<script>
$(document).ready(function() {
  //Calls the tocify method on your HTML div.
  $("#toc").tocify();
});
$("#toc").hover(function() {
  $("#toc").css("z-index", "111")
}, function() {
  $("#toc").css("z-index", "1")
});
</script>



<script>

var shifted = false;

$(window).keyup(function(event) {
    shifted = event.shiftKey;
});

$(window).keydown(function(event) {
  if(event.keyCode == 16){
    shifted = event.shiftKey;
  }
  if (shifted == false) {
      if(event.keyCode == 37){
        $('.glyphicon-chevron-left')[0].click()
      }
      if(event.keyCode == 39){
        $('.glyphicon-chevron-right')[0].click()
      }
  }
});
</script>


<script>
// check if we got served from pankat-server
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
if (xhr.readyState == XMLHttpRequest.DONE) {
  if (xhr.status == 200) {
    console.log("request to /pankat-server returned status: " + xhr.status + ", so yes we got served from pankat-server");
    $('#draft').css("display", "block");
    $('#roadmap').css("display", "block");
  }
}
}
xhr.open('GET', "/pankat-server", false);
xhr.send(null);
</script>
</body>
</html>
