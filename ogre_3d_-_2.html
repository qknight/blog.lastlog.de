<!DOCTYPE html>
<!-- this document is auto-generated from pankat document editor -->
<html xmlns="http://www.w3.org/1999/xhtml">

<head data-article-dst-filename="ogre_3d_-_2.html">

<meta charset="utf-8" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>ogre 3d - 2</title>

<script src="js/jquery.min.js"></script>

<script src="js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="js/jquery.tocify.min.js"></script>

<link type="text/css" rel="stylesheet" href="css/jquery.tocify.css" />



<script src="js/reconnecting-websocket.min.js"></script>
<script src="js/pankat-websocket.js"></script>
<script src="js/diffDOM.js"></script>


<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
<script src="js/bootstrap.min.js"></script>

<script src="js/anchor.min.js"></script>

<link rel="icon" href="media/favicon.ico" type="image/x-icon" />


<!--[if lt IE 9]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="css/pandoc-kate.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />

</head>
<body>

<div id="toc"></div>

<!-- menu begins -->
<div class="container">
  <nav class="navbar navbar-default">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">lastlog.de/blog</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="timeline.html"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> timeline</a></li>
        <li><a href="about.html"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> about</a></li>
        <li><a href="/draft" id="draft" style="display: none"><span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> draft</a></li>
        <li><a href="/draft?article=posts/roadmap.mdwn" id="roadmap" style="display: none"><span class="glyphicon glyphicon glyphicon-road" aria-hidden="true"></span> roadmap</a></li>

      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li><a title="live updates of article updates on posts/ogre/ogre_3d_-_2.mdwn" id="websocket" style="display: none"><span id="websocketStatus" class="glyphicon glyphicon-remove" aria-hidden="true"></span> websocket</a></li>
        <!-- <li><a href="#">Login</a></li> -->
      </ul>

      <!--<div id="right">
        <form class="navbar-form navbar-right">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
        </form>
      </div>-->
    </div><!-- /.navbar-collapse -->
  </nav>

<div id="headerAndArticle">


  <div id="headerContainer">
    <header class="header"><span id="articleNavLeft"> <a href="package_managers.html"> 
      <span class="glyphiconLink glyphicon glyphicon-chevron-left" aria-hidden="true" title="previous article"> </span> prev. article
    </a> </span><span id="articleNavRight"><a href="a_new_workstation_ii.html"> 
        next article <span class="glyphiconLink glyphicon glyphicon-chevron-right" aria-hidden="true" title="next article"></span>
    </a> </span></header>
  </div>
  
      <div id="seriesContainer">
      <a href="timeline.html?filter=series::ogre" title="article series ogre" class="seriesbtn btn btn-primary">ogre</a>
        <header class="seriesHeader">
          <div id="seriesLeft"><a href="ogre_3d.html"><span class="glyphiconLinkSeries glyphicon glyphicon-chevron-left" aria-hidden="true" title="previous article in series"></span>
            </a>   </div>
          <div id="seriesRight">   <a href="ogre_3d_-_3.html">
              <span class="glyphiconLinkSeries glyphicon glyphicon-chevron-right" aria-hidden="true" title="next article in series"></span>
            </a></div>
        </header>
      </div>

  <div class="article">
    <h1 id="SiteTitle">ogre 3d - 2</h1>
    <div id="date"><p><span id="lastupdated">20 feb 2010</span></p></div><div id="tags"><p><a href="timeline.html?filter=tag::gentoo" class="tagbtn btn btn-primary">gentoo</a><a href="timeline.html?filter=tag::linux" class="tagbtn btn btn-primary">linux</a><a href="timeline.html?filter=tag::ogre3d" class="tagbtn btn btn-primary">ogre3d</a><a href="timeline.html?filter=tag::packagemanager" class="tagbtn btn btn-primary">packagemanager</a><a href="timeline.html?filter=tag::technology" class="tagbtn btn btn-primary">technology</a><a href="timeline.html?filter=tag::usability" class="tagbtn btn btn-primary">usability</a></p></div>
    <p><a href="media/ogrelogo-small.jpg"><img src=media/ogrelogo-small.jpg alt="" style="float: right" width="200px"></a></p>
<h2 data-number="1" id="status-update-for-ogre-on-gentoo">status update
for ogre on gentoo</h2>
<ul>
<li><p><strong>1.7 will have a samples browser</strong> i actually do
hate the sample browser deployment as well as the concept it does
implement. if one uses cmake and forgets to modify the
‘CMAKE_INSTALL_PREFIX’ but afterwars installs the library using
‘DESTDIR=/tmp make install’ nothing will work since all resources.cfg,
plugins.cfg and media.cfg contain the wrong location and since the
program is installed as root but executed as normal user it fails
horribly when starting the SampleBrowser. but more important - since the
sample browser loads the plugins as shared objects (for example
./lib/Sample_Water.so) <strong>the samples are degraded as ‘showcase’
only but can’t be used to play with directly as it requires a
complicated installation mechanism.</strong> i see two fixes: either
create another CMakeLists.txt which can build standalone runners for
each sample or write a standalone runner for this create .so files. but
in general i don’t like what they did, it degrades the quality of the
samples since you have to run the SampleBrowser, find the plugin you
want to have a look at and next you have to search the soure directory
for the plugin. let’s see how the trolls (authors of qt) did that in
comparison: they build standalone examples; they give you the
source-code and the binary in one directory; they do code documentation
based on a comment system which parses the example code.</p></li>
<li><p><strong>1.7 will use cmake for the ogre library (instead of
autotools) -&gt; i absolutely love this! this still has some quirks but
i think it’s very good work! </strong></p></li>
<li><p>using ogre disabled ‘key repeat’ every time i start my
application, i need to type: ‘<strong>xset r on</strong>’ to re-enable
it. did not find out why… <strong>UPDATE:</strong> seems to be fixed in
1.7rc1</p></li>
<li><p>ogre displays a configurator everytime i start my application
which configures the ogre ‘ogre.cfg’. this window shows up and since
1.7rc1 i CAN NOT press ‘return’ directly to continue with the default
settings - instead i have to click the ‘accept’ button with the mouse.
every time! this is VERY ANNOYING! maybe this has something todo with my
‘focus widget’ policy but since all other programs on my system work and
especially since ogre 1.6 did work that way i wonder why this ‘ogre
configuration widget’ does not have focus after i start my
application…?</p></li>
<li><p>freeimage issue: the old ogre 1.6 had devil support but they
probably dropped it (i’m not sure about that but i tried to find ‘devil’
in the source code (1.7rc1) but came up with only a few references, most
were in the documentation) and therefore one needs freeimage for which i
don’t even have an ebuild. so i installed freeimage and afterwards -
once again - ogre. i basically compiled and installed ogre a couple of
times to find that out - since freeimage is very important and without
it no sample works and all you can see is this yello/black textures all
over the place and some errors in the log which don’t make much sense
without massive googling. why does the cmake script not stop with a
<strong>BIG WARNING: you have samples enabled but freeimage wasn’t
found</strong> instead the whole library can be built without support
for the Media/ archives coming with the samples but then the samples are
completely useless. <strong>not to forget: since ogre installed into
/usr/local i needed to alter my /etc/ld.so.conf to reflect the new
libOgreMain.so location (and others) and afterwards i had to run
ldconfig as root </strong>(this is now done by the ebuild i wrote
automatically)</p></li>
<li><p>i wanted to have a look at the samples (despite of naming them
samples instead of examples one thinks they are of help).
<strong>however all samples share one giant resource system.</strong>
this might make sense at first however if you - the newcomer - don’t
have any clue about unique namespaces in material scripts and textures
and compositing of texutres using various vertex and fragment shaders
renders the samples are pretty useless because of their complexity.
<strong>i want simple samples which have all they need in ONE folder
with a clean structure and NOT having to rely on external files which
are referenced in mystical ways.</strong></p></li>
</ul>
<p>i’m not the only person who has serious problems getting ogre to
work, see [1] and [2]. [2] is exactly what i meant by low quality
downstream support.</p>
<p>AND before anyone asked, NO i did not fill any bug tracker. if you
like to do that, please feel free to do so. i hate to waste my time
using email and ‘gray listening’ , then after i get a login. i’ve filled
quite some bugs on bug trackers but as long as they don’t provide a
frontend i consider ‘usable’ i won’t fill any bugs anymore. i often
don’t even know where to fill the bugs anyway since they have lots of
things you have to fill in… waste of time</p>
<p>right now i’m going back to ogre 1.6 since ogre 1.7 gave me this
error when compiling my project:</p>
<pre><code>An exception has occurred: OGRE EXCEPTION(5:ItemIdentityException): Cannot find a group named debugger in ResourceGroupManager::isResourceGroupInitialised at /home/joachim/Desktop/projects/space-game/ogre/OgreMain/src/OgreResourceGroupManager.cpp (line 1880)</code></pre>
<p>i have absolutely no clue what could cause this, i did not edit
OgreResourceGroupManager.cpp at all. googling didn’t reveal anything and
the really nice ppl on irc.freenode.org#ogre3d couldn’t help me
either.</p>
<p><strong>summary: working with ogre 3d does not make much fun
currently </strong></p>
<h2 data-number="2" id="nvidia-cg-support-in-ogre">nvidia cg support in
ogre</h2>
<p>actually i did get the cg (nvidia shader stuff) running. i noticed
that in plugins.cfg i had*:</p>
<pre><code>#Plugin=Plugin_CgProgramManager.so</code></pre>
<p>why does ogre say:</p>
<pre><code>WARNING: material shader/ring has no supportable Techniques and will be blank. Explanation:</code></pre>
<p>Pass 0: Vertex program shader/gradientVP cannot be used - not
supported.</p>
<p>instead of:</p>
<pre><code>WARNING: you disabled cg support by not using any Plugin_CgProgramManager.so extension so no cg file will work for every use of cg</code></pre>
<ul>
<li>this is because we use git and since the project was developed by me
the nvidia user and seitz the ati user, he disabled the cg programmanger
in his plugins.cfg, i probably updated the file without knowing
that</li>
</ul>
<h2 data-number="3" id="ogre-3d-1.7rc1-ebuild">ogre 3d 1.7rc1
ebuild</h2>
<p>i’ve writte an ebuild for ogre 1.7rc1, it can be downloaded at [4], i
copied some parts from [3] which was very helpful since i never did
write an ebuild using cmake before.</p>
<p>i did not check the dependencies and they might probably be
incomplete. if you want to use my ebuild you might just install ogre
1.6.5 with all use flags you want and then update to my package without
cleaning ‘world dependencies’. also note that using my ebuild all
samples will be built but the SampleBrowser binary and some others won’t
be installed. i currently don’t understand why but the reason is that
<strong>CMAKE_BUILD_TYPE=Gentoo</strong> is set but the CMakeLists.txt
somehow expects <strong>CMAKE_BUILD_TYPE=RelWithDebInfo</strong> but i
wasn’t able to overwrite that value with -D in the ebuild. i’ve asked in
#gentoo-sunrise for support and they told me that this probably has to
be fixed upstream. also don’t forget to install freeimage!</p>
<p><strong>i did not upload that ebuild to bugs.gentoo.org - if you want
to, please feel free to do so</strong></p>
<h2 data-number="4" id="links">links</h2>
<ul>
<li>[1] <a
href="http://www.ogre3d.org/forums/viewtopic.php?f=2&amp;t=54756&amp;start=0"
class="uri">http://www.ogre3d.org/forums/viewtopic.php?f=2&amp;t=54756&amp;start=0</a></li>
<li>[2] <a
href="http://gpnfn.blogspot.com/2010/01/building-cegui-ogre-renderer-in-gentoo.html"
class="uri">http://gpnfn.blogspot.com/2010/01/building-cegui-ogre-renderer-in-gentoo.html</a></li>
<li>[3] <a href="http://aur.archlinux.org/packages/ogre/ogre/PKGBUILD"
class="uri">http://aur.archlinux.org/packages/ogre/ogre/PKGBUILD</a></li>
<li>[4] <a href="http://lastlog.de/misc/ogre-1.7.0_rc1.ebuild"
class="uri">http://lastlog.de/misc/ogre-1.7.0_rc1.ebuild</a></li>
</ul>
<h2 data-number="5" id="update">update</h2>
<p>2010-02-20: my ebuild does not install the library as well (that is
the .so files) so currently everything is built but both the library and
the bin/* files are not installed</p>
<p>Documentation about this is in
‘<strong>/usr/portage/eclass/cmake-utils.eclass</strong>’. About
CMAKE_BUILD_TYPE=Gentoo i’d like to quote the cmake-utils.eclass
comment:</p>
<pre><code># You usualy do *NOT* want nor need to set it as it pulls CMake default build-type
# specific compiler flags overriding make.conf.</code></pre>
<p>My current fix is to overwrite that buildtype with:</p>
<pre><code>CMAKE_BUILD_TYPE=RelWithDebInfo just before src_configure()</code></pre>
<p><strong>NOTE:</strong> i’ve also updated the ebuild at [4]</p>

  </div>

</div>

<div id="ArticleSourceCode">

<a href="posts/ogre/ogre_3d_-_2.mdwn" title="posts\ogre\ogre_3d_-_2.mdwn">article source</a>
</div>

</div>

<div id="scrollUp">
<span id="scrollUpBtn" class="glyphiconLink glyphicon glyphicon-chevron-up" aria-hidden="true" title="scroll up"></span>
</div>

<script>
$("#scrollUpBtn").click(function() {
  $("html, body").animate({ scrollTop: 0 }, "slow");
  return false;
});
</script>


<script>
window.onload = function(e){
  anchors.add('h1')
  anchors.add('h2')
  anchors.add('h3')
  anchors.add('h4')
  anchors.add('h5')
}
</script>




<script>
$(document).ready(function() {
  //Calls the tocify method on your HTML div.
  $("#toc").tocify();
});
$("#toc").hover(function() {
  $("#toc").css("z-index", "111")
}, function() {
  $("#toc").css("z-index", "1")
});
</script>



<script>

var shifted = false;

$(window).keyup(function(event) {
    shifted = event.shiftKey;
});

$(window).keydown(function(event) {
  if(event.keyCode == 16){
    shifted = event.shiftKey;
  }
  if (shifted == false) {
      if(event.keyCode == 37){
        $('.glyphicon-chevron-left')[0].click()
      }
      if(event.keyCode == 39){
        $('.glyphicon-chevron-right')[0].click()
      }
  }
});
</script>


<script>
// check if we got served from pankat-server
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
if (xhr.readyState == XMLHttpRequest.DONE) {
  if (xhr.status == 200) {
    console.log("request to /pankat-server returned status: " + xhr.status + ", so yes we got served from pankat-server");
    $('#draft').css("display", "block");
    $('#roadmap').css("display", "block");
  }
}
}
xhr.open('GET', "/pankat-server", false);
xhr.send(null);
</script>
</body>
</html>
