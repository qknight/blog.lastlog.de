<!DOCTYPE html>
<!-- this document is auto-generated from pankat document editor -->
<html xmlns="http://www.w3.org/1999/xhtml">

<head data-article-dst-filename="mac_os_x_virtualbox.html">

<meta charset="utf-8" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>mac os x virtualbox</title>

<script src="js/jquery.min.js"></script>

<script src="js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="js/jquery.tocify.min.js"></script>

<link type="text/css" rel="stylesheet" href="css/jquery.tocify.css" />



<script src="js/reconnecting-websocket.min.js"></script>
<script src="js/pankat-websocket.js"></script>
<script src="js/diffDOM.js"></script>


<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
<script src="js/bootstrap.min.js"></script>

<script src="js/anchor.min.js"></script>

<link rel="icon" href="media/favicon.ico" type="image/x-icon" />


<!--[if lt IE 9]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="css/pandoc-kate.css" type="text/css" />
<link rel="stylesheet" href="css/style.css" type="text/css" />

</head>
<body>

<div id="toc"></div>

<!-- menu begins -->
<div class="container">
  <nav class="navbar navbar-default">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">lastlog.de/blog</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="timeline.html"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> timeline</a></li>
        <li><a href="about.html"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> about</a></li>
        <li><a href="/draft" id="draft" style="display: none"><span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> draft</a></li>
        <li><a href="/draft?article=posts/roadmap.mdwn" id="roadmap" style="display: none"><span class="glyphicon glyphicon glyphicon-road" aria-hidden="true"></span> roadmap</a></li>

      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li><a title="live updates of article updates on posts/mac_os_x_virtualbox.mdwn" id="websocket" style="display: none"><span id="websocketStatus" class="glyphicon glyphicon-remove" aria-hidden="true"></span> websocket</a></li>
        <!-- <li><a href="#">Login</a></li> -->
      </ul>

      <!--<div id="right">
        <form class="navbar-form navbar-right">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
        </form>
      </div>-->
    </div><!-- /.navbar-collapse -->
  </nav>

<div id="headerAndArticle">


  <div id="headerContainer">
    <header class="header"><span id="articleNavLeft"> <a href="evopedia_on_windows_with_installer.html"> 
      <span class="glyphiconLink glyphicon glyphicon-chevron-left" aria-hidden="true" title="previous article"> </span> prev. article
    </a> </span><span id="articleNavRight"><a href="gentoo_security.html"> 
        next article <span class="glyphiconLink glyphicon glyphicon-chevron-right" aria-hidden="true" title="next article"></span>
    </a> </span></header>
  </div>
  

  <div class="article">
    <h1 id="SiteTitle">mac os x virtualbox</h1>
    <div id="date"><p><span id="lastupdated">29 dec 2010</span></p></div><div id="tags"><p><a href="timeline.html?filter=tag::gentoo" class="tagbtn btn btn-primary">gentoo</a><a href="timeline.html?filter=tag::linux" class="tagbtn btn btn-primary">linux</a><a href="timeline.html?filter=tag::macosx" class="tagbtn btn btn-primary">macosx</a><a href="timeline.html?filter=tag::p2p" class="tagbtn btn btn-primary">p2p</a><a href="timeline.html?filter=tag::packagemanager" class="tagbtn btn btn-primary">packagemanager</a><a href="timeline.html?filter=tag::qt" class="tagbtn btn btn-primary">qt</a><a href="timeline.html?filter=tag::technology" class="tagbtn btn btn-primary">technology</a><a href="timeline.html?filter=tag::usability" class="tagbtn btn btn-primary">usability</a></p></div>
    <h2 data-number="1" id="motivation">motivation</h2>
<p>running mac os x from virtualbox helps to experiment with software
deployment for that platform. i’m using gentoo <strong>linux as host
system</strong> with <strong>2.6.34-gentoo-r6</strong> kernel on a
<strong>64 bit core 2 duo</strong> machine with <strong>virtualbox
3.2.10 OSE</strong>. there are various blog postings about how to get it
running so i won’t repeat this here.</p>
<p>the most <strong>important </strong>thing is to <strong>use the snow
leopard retail dvd</strong>. as the dvd coming with the mac (a mac book
pro in my case) won’t work. you can get the retail dvd on ebay or
various other sources. note: the retail dvd is not labeled ‘snow leopard
retail dvd’ but something like ‘snow leopard update dvd’ in most
auctions (don’t blame me if that is wrong).</p>
<h2 data-number="2" id="how-i-use-it">how i use it</h2>
<p>having snow leopard not only native, but also in a virtualbox image,
makes testing of software easier.</p>
<h2 data-number="3" id="hints">hints</h2>
<h3 data-number="3.1" id="disk-image-size">disk image size</h3>
<p>i use about 40 gb here, and about 25 gb are actually in use with:</p>
<ol type="1">
<li>latest patch (1 gb)</li>
<li>xcode (6-8 gb)</li>
<li>trolltechs qt sdk (2 gb)</li>
<li>mac os x (8 gb)</li>
</ol>
<p>i wasted a lot of disk space with a default installation. but i don’t
want to spend too much time on that right now so i will leave it that
way. i removed the printer drivers later on, saved me 600mb.</p>
<h3 data-number="3.2"
id="when-installing-software-map-the-image-dmg-using-samba-running-on-the-host-machine">when
installing software, map the image (dmg) using samba (running on the
host machine)</h3>
<p>import dmg images, which are used to install software from, using
samba from the host. this way you do not have to copy the dmg onto the
virtual machine using ssh or by mapping an external harddrive (note: the
OSE version i am using, does not support USB host mapping anyway) into
the virtual machine.</p>
<p>this also reduces the host image size by a few gigabyte of disk
space. initially i was doing it wrong: i copied the file, installed from
it and finally removed it. however, removing it did not have much of an
effect, as virtualbox does not know about hfs+ partition scheme,
therefore the file is only deleted inside the virtualmachine, still the
host image uses the diskspace.</p>
<p>example:</p>
<p>my current <strong>disk image</strong>: mac os x [snow leopard].vdi
is at <strong>25Gb</strong>. but <strong>inside the virtual
machine</strong> is is only <strong>18gb</strong>.</p>
<h4 data-number="3.2.1" id="smb.conf">smb.conf</h4>
<pre><code>[global]
  workgroup = MYGROUP
  server string = Samba Server
  security = share
  dns proxy = no
[rw-files]
  comment = Temporary rw files
  path = /home/user/smbshare/rw
  read only = no
  writable = yes
  public = yes
[ro-files]
  comment = Temporary ro files
  path = /home/user/smbshare/ro
  read only = no
  writable = no
  public = yes</code></pre>
<p>don’t forget to:</p>
<ol type="1">
<li>create the paths listed above</li>
<li>secure the network as a rw path might be accessible from your
lan</li>
</ol>
<p>consider using a user/password for that.</p>
<h3 data-number="3.3" id="downloading-xcode">downloading xcode</h3>
<p>use wget to download it. it is about 3,6gb and it failed several
times here. also resuming did not work well. after several attempts
downloading it (must be about 12gb i’ve already downloaded) i had a, yet
again, broken download at 99%. i thought: “not again”! and as there was
no resuming (using a webbrowser) i downloaded a torrent.</p>
<p>next i used the torrent and started the download, which created a
file with the same filename. i closed the torrent client (rtorrent) and
moved the previously metioned 99% download file, to the place where the
torrent expected it’s download. then i restarted the torrent
download.</p>
<p>thanks i did not have an offset error (this can happen on wrong
resumes, anyway i did not use resume).</p>
<p>finally the torrent checked all chunks and finnaly there was only 1mb
left to download. so i repaired my download, using bittorrent. all i had
to do is wait 5minutes.</p>
<p>next thing was file integrity. it seems that apple does encode some
individual information into the xcode download. if rumors are true, it
is no wonder that users sue apple, see [1]. anyway, this means we can’t
create a md5sum. it would be interesting to know what is going on.</p>
<p>what we do know already is that most of the file, apparently 99% of
the download is generic. if not, then i would not be able to repair the
xcode download with the torrent content of a different user. see
discussion at [2] for more input on this.</p>
<h3 data-number="3.4" id="create-snapshots">create snapshots</h3>
<p>virtualbox supports snapshots, use them! <strong>they are a great way
to update various system components as xcode without having to uninstall
any components</strong>. this results in a cleaner system, saves time
&amp; resources as deleted files are only deleted virtually inside the
vm.</p>
<h3 data-number="3.5" id="image-growth">image growth</h3>
<p>every virtually deleted file is not really deleted as virtualbox
works on a block device layer. that means: if hfs+ decides to use
deleted inode for a newly created file it will be good as vm disk and
real disk are in sync. but i guess more often than not this is not the
case and the real disk image will grow over time.</p>
<h2 data-number="4" id="links">links</h2>
<ul>
<li>[1] <a
href="http://www.heise.de/newsticker/meldung/Apple-wegen-angeblicher-Weitergabe-von-Nutzerdaten-verklagt-Update-1159403.html"
class="uri">http://www.heise.de/newsticker/meldung/Apple-wegen-angeblicher-Weitergabe-von-Nutzerdaten-verklagt-Update-1159403.html</a></li>
<li>[2] <a
href="http://discussions.apple.com/thread.jspa?messageID=12770938"
class="uri">http://discussions.apple.com/thread.jspa?messageID=12770938</a></li>
</ul>

  </div>

</div>

<div id="ArticleSourceCode">

<a href="posts/mac_os_x_virtualbox.mdwn" title="posts\mac_os_x_virtualbox.mdwn">article source</a>
</div>

</div>

<div id="scrollUp">
<span id="scrollUpBtn" class="glyphiconLink glyphicon glyphicon-chevron-up" aria-hidden="true" title="scroll up"></span>
</div>

<script>
$("#scrollUpBtn").click(function() {
  $("html, body").animate({ scrollTop: 0 }, "slow");
  return false;
});
</script>


<script>
window.onload = function(e){
  anchors.add('h1')
  anchors.add('h2')
  anchors.add('h3')
  anchors.add('h4')
  anchors.add('h5')
}
</script>




<script>
$(document).ready(function() {
  //Calls the tocify method on your HTML div.
  $("#toc").tocify();
});
$("#toc").hover(function() {
  $("#toc").css("z-index", "111")
}, function() {
  $("#toc").css("z-index", "1")
});
</script>



<script>

var shifted = false;

$(window).keyup(function(event) {
    shifted = event.shiftKey;
});

$(window).keydown(function(event) {
  if(event.keyCode == 16){
    shifted = event.shiftKey;
  }
  if (shifted == false) {
      if(event.keyCode == 37){
        $('.glyphicon-chevron-left')[0].click()
      }
      if(event.keyCode == 39){
        $('.glyphicon-chevron-right')[0].click()
      }
  }
});
</script>


<script>
// check if we got served from pankat-server
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
if (xhr.readyState == XMLHttpRequest.DONE) {
  if (xhr.status == 200) {
    console.log("request to /pankat-server returned status: " + xhr.status + ", so yes we got served from pankat-server");
    $('#draft').css("display", "block");
    $('#roadmap').css("display", "block");
  }
}
}
xhr.open('GET', "/pankat-server", false);
xhr.send(null);
</script>
</body>
</html>
